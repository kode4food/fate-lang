from './support' import mutable

export from './support' import print, timeout

export let streamConsumer = (resolve -> stream ->
  let content = mutable('') # oh, no, a mutable!
  stream.on('data',  data -> content.value + data | content.set)
        .on('end',   -> [content.value] | resolve)
        .on('error', err -> [content.value, err] | resolve)
)
