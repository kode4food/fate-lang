import nodeunit
import '../build/fate.js' as fate
let types = fate.Types
let runtime = fate.Runtime

def trueFalse(test)
  let isFalse = test.equal(?, false),
      isTrue = test.equal(?, true)

  types.isTrue(None)              | isFalse
  types.isTrue(Some)              | isTrue
  types.isTrue(null)              | isFalse
  types.isTrue(undefined)         | isFalse
  types.isTrue()                  | isFalse
  types.isTrue([])                | isTrue
  types.isTrue({})                | isTrue
  types.isTrue({ name: 'fate' })  | isTrue
  types.isTrue("hello")           | isTrue
  types.isTrue([1])               | isTrue
  types.isFalse(None)             | isTrue
  types.isFalse()                 | isTrue
  types.isFalse([])               | isFalse
  types.isFalse({})               | isFalse
  types.isFalse({ name: 'fate' }) | isFalse
  types.isFalse("hello")          | isFalse
  types.isFalse([1])              | isFalse
  test.done()
end

def someNone(test)
  let isFalse = test.equal(?, false),
      isTrue = test.equal(?, true)

  runtime.isSome(null)      | isFalse
  runtime.isSome(undefined) | isFalse
  runtime.isSome(Some)      | isTrue
  runtime.isSome("hello")   | isTrue
  runtime.isSome(false)     | isTrue
  runtime.isNone(null)      | isTrue
  runtime.isNone(undefined) | isTrue
  runtime.isNone(None)      | isTrue
  runtime.isNone("hello")   | isFalse
  runtime.isNone(false)     | isFalse
  test.done()
end

let tests = nodeunit.testCase({
  "True / False": trueFalse,
  "Some / None": someNone
})

export tests
